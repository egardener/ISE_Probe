<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API Reference</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/ISE_Probe/assets/css/0.styles.2c196f61.css" as="style"><link rel="preload" href="/ISE_Probe/assets/js/app.c8384b2c.js" as="script"><link rel="preload" href="/ISE_Probe/assets/js/11.55ab4da4.js" as="script"><link rel="prefetch" href="/ISE_Probe/assets/js/6.c19be400.js"><link rel="prefetch" href="/ISE_Probe/assets/js/2.c736891e.js"><link rel="prefetch" href="/ISE_Probe/assets/js/3.12004e6a.js"><link rel="prefetch" href="/ISE_Probe/assets/js/4.f639e4d5.js"><link rel="prefetch" href="/ISE_Probe/assets/js/5.ea7c001f.js"><link rel="prefetch" href="/ISE_Probe/assets/js/7.f5432d3a.js"><link rel="prefetch" href="/ISE_Probe/assets/js/8.9b2fb354.js"><link rel="prefetch" href="/ISE_Probe/assets/js/9.a4fb02de.js"><link rel="prefetch" href="/ISE_Probe/assets/js/10.3da9efd1.js"><link rel="prefetch" href="/ISE_Probe/assets/js/12.fbb9fdec.js"><link rel="prefetch" href="/ISE_Probe/assets/js/13.5e0e63df.js">
    <link rel="stylesheet" href="/ISE_Probe/assets/css/0.styles.2c196f61.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ISE_Probe/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/ISE_Probe/" class="sidebar-link">ISE Probe Interface API Reference</a></li><li><a href="/ISE_Probe/api.html" class="sidebar-link">Class Functions</a></li><li><a href="/ISE_Probe/ph.html" class="sidebar-link">pH Measurement</a></li><li><a href="/ISE_Probe/orp.html" class="sidebar-link">ORP Measurement</a></li></ul> </div> <div class="page"><!---->  <div class="content"><h1>Introduction</h1> <p>The ISE (Ion Specific Electrode) Probe Interface can be used to read any probe that outputs a voltage in the range of -1024 mV to 1024 mV. pH and ORP are supported with specific libraries, but it is very easy to use another mV based probe by extending the library.</p> <h2 id="characteristics"><a href="#characteristics" aria-hidden="true" class="header-anchor">#</a> Characteristics</h2> <ul><li><strong>mV Measurement range</strong>: -1024 mV to 1024 mV</li> <li><strong>mV Accuracy</strong>: ± 1 mV</li> <li><strong>Temperature range</strong>: -2 to 35 C</li> <li><strong>Temperature Precision</strong>: 0.05 C</li> <li><strong>Interface</strong>: I2C</li> <li><strong>Current use</strong>: ~10mA peak, low idle current ~1mA</li> <li><strong>Supply voltage range</strong>: 3.3 to 5.5V</li></ul> <h1>Connections</h1> <h2 id="i2c-connections"><a href="#i2c-connections" aria-hidden="true" class="header-anchor">#</a> I2C Connections</h2> <p>Connection to the device is as follows:</p> <div class="table"><table><thead><tr><th style="text-align:center">ISE Probe Interface</th> <th style="text-align:center">Master device</th></tr></thead> <tbody><tr><td style="text-align:center">GND</td> <td style="text-align:center">GND</td></tr> <tr><td style="text-align:center">SCL</td> <td style="text-align:center">SCL</td></tr> <tr><td style="text-align:center">SDA</td> <td style="text-align:center">SDA</td></tr> <tr><td style="text-align:center">3.3/5v</td> <td style="text-align:center">3.3 - 5V</td></tr></tbody></table></div> <h2 id="temperature-sensor-connections"><a href="#temperature-sensor-connections" aria-hidden="true" class="header-anchor">#</a> Temperature Sensor Connections</h2> <p>The temperature probe comes with a 3-wire header; any 3-wire DS18B20 will work. The VCC pin is labeled with a triangle:</p> <div class="table"><table><thead><tr><th style="text-align:center">ISE Probe Interface</th> <th style="text-align:center">Temperature Probe</th></tr></thead> <tbody><tr><td style="text-align:center">▲ (VCC)</td> <td style="text-align:center">▲</td></tr> <tr><td style="text-align:center">(Data)</td> <td style="text-align:center">(pin 2)</td></tr> <tr><td style="text-align:center">(GND)</td> <td style="text-align:center">(pin 3)</td></tr></tbody></table></div> <p>A standalone DS18B20 can be directly connected to the board, no resistor is required.</p> <h2 id="i2c-bus-pull-ups"><a href="#i2c-bus-pull-ups" aria-hidden="true" class="header-anchor">#</a> I2C Bus Pull-ups</h2> <p>Each device comes with 4.7k resistor pullups on the I2C bus. They pass through a 3-pad solder paste jumper. The outer pads are connected to the middle by thin traces. To disable the pullups, use a utility knife to cut both traces. To re-enable the pullups, connect all three pads together with solder.</p> <h1>Getting Started</h1> <p>To start developing with the device, you need to install a library.</p> <ul><li><p><strong>Arduino IDE</strong>:  go to the library manager (Sketch / Include Library / Manage Libraries...) and search for ISE Probe.</p></li> <li><p><strong>PlatformIO</strong>: install the library using the library manager (PlatformIO / PlatformIO Home / Libraries), search for ISE Probe.</p></li> <li><p><strong>Particle.io</strong>: search for ISE_Probe_Interface in the Libraries section of the IDE.</p></li> <li><p><strong>MicroPython</strong>: clone the <a href="https://github.com/u-fire/ISE_Probe" target="_blank" rel="noopener noreferrer">GitHub repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. In the python/MicroPython directory, you will find the files for various boards and their accompanying README files with instructions.</p></li> <li><p><strong>Raspberry Pi</strong>:  clone the <a href="https://github.com/u-fire/ISE_Probe" target="_blank" rel="noopener noreferrer">GitHub repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. In the python/RaspberryPi directory, you will find the files for various boards and their accompanying README files with instructions. Be sure to read the section below for instructions.</p></li> <li><p><strong>Rust</strong>: Download/install/documentation for the <a href="https://crates.io/crates/ufire_ise" target="_blank" rel="noopener noreferrer">crate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h2 id="raspberry-pi"><a href="#raspberry-pi" aria-hidden="true" class="header-anchor">#</a> Raspberry Pi</h2> <p>Before you can run anything, you will need to enable software I2C; the Pi's hardware implementation has a clock-stretching bug that will prevent it from working with the probe (or any other device that uses clock-stretching).</p> <div><ol><li><p><code>sudo nano /boot/config.txt</code> and scroll to the bottom</p></li> <li><p>Add
<code>dtoverlay=i2c-gpio,i2c_gpio_sda=&lt;pin&gt;,i2c_gpio_scl=&lt;pin&gt;</code>
replacing <code>&lt;pin&gt;</code> with whatever pin you'd like to use. Refer <a href="https://docs.microsoft.com/en-us/windows/iot-core/media/pinmappingsrpi/rp2_pinout.png" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for the pin functions, you will need to use the orange GPIO xx labels in the picture to locate the pins.</p></li> <li><p><code>ctrl + x</code> to exit, <code>y</code> to save, and <code>enter</code> to confirm the filename.</p></li> <li><p>Reboot</p></li></ol></div> <h2 id="the-shell-example"><a href="#the-shell-example" aria-hidden="true" class="header-anchor">#</a> The <code>shell</code> Example</h2> <div><p>An interactive shell interface is provided and is a quick and easy way to get started using the device. You will find the equivalent commands in the code area to the right when applicable. Upload it to your master device and start a serial terminal. You will be presented with a <code>&gt;</code> prompt where you can enter commands and receive a response, similar to a shell command line or REPL. It is often quicker to experiment this way rather than rewriting, compiling, and uploading new versions every time.</p></div> <h2 id="changing-the-i2c-address"><a href="#changing-the-i2c-address" aria-hidden="true" class="header-anchor">#</a> Changing the I2C Address</h2> <div><p>If needed, the I2C address can be changed by calling <code>setI2CAddress()</code>. The device will permanently change it's address and continue to use it after a power reset. If you forget the new address, you will need to use an I2C bus scanner to locate it again.</p></div> <h1>Calibration</h1> <p>There are two calibration options, single point and dual point. Single point calibration is a simple offset to the measured value. It is best suited for a sensor that displays linear measurements in the range of interest. Dual point calibration is used when the probe results are not linear over the entire range. Two points are selected, the high and low end of expected measurements.</p> <h3 id="single-point"><a href="#single-point" aria-hidden="true" class="header-anchor">#</a> Single Point</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ISE_Probe ISE<span class="token punctuation">;</span>

ISE<span class="token punctuation">.</span><span class="token function">calibrateSingle</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// the low measurement being 20 mV</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> iseprobe <span class="token keyword">import</span> iseprobe

ISE <span class="token operator">=</span> iseprobe<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

ISE<span class="token punctuation">.</span>calibrateSingle<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token comment"># the low measurement being 20 mV</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-text"><code>  cal 7.0
</code></pre></div><div><p>Single point calibration is done in the mV unit. To begin a single point calibration, submerge the probe and wait for the readings to stabilize. Then call <code>calibrateSingle</code> and pass the value the probe should be reading in mV. After calling it, the results are saved in the device's EEPROM and used automatically.</p></div> <div><p>As an example, if an ORP probe is reading 560 mV in a 600 mV solution, call <code>calibrateSingle(600)</code>.</p></div> <h3 id="dual-point"><a href="#dual-point" aria-hidden="true" class="header-anchor">#</a> Dual Point</h3> <p>Alternatively, you can use dual point calibration between two predesignated points. Two calibration solutions are required, the low and high values in mV you expect to measure between.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ISE<span class="token punctuation">.</span><span class="token function">calibrateProbeLow</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// after measurement, clean probe and place in high solution</span>
ISE<span class="token punctuation">.</span><span class="token function">calibrateProbeHigh</span><span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ISE<span class="token punctuation">.</span><span class="token function">useDualPoint</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>ISE<span class="token punctuation">.</span>calibrateProbeLow<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># after measurement, clean probe and place in high solution</span>
ISE<span class="token punctuation">.</span>calibrateProbeHigh<span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">)</span>
ISE<span class="token punctuation">.</span>useDualPoint<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-text"><code>  low 0
  high 140
  dp 1
</code></pre></div><div><ol><li>Determine the lowest and highest measurement you expect. For example, the lowest level you might measure would be 0 mV and the highest might be 140 mV. These points will be referred to as
<code>referenceLow</code> and <code>referenceHigh</code></li> <li>Put the probe in a calibration solution at <code>referenceLow</code> and wait for readings to stabilize, call
<code>calibrateProbeLow(0)</code>. Do the same for referenceHigh by calling <code>calibrateProbeHigh(140)</code>.</li> <li>By default, the device does not use dual points. A call to <code>useDualPoint()</code> must be made to enable it. Once set, it will continue to use it automatically.</li></ol></div> <div><p>You can also set all four values directly using <code>setDualPointCalibration()</code>.</p></div> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ISE<span class="token punctuation">.</span><span class="token function">useDualPoint</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>ISE<span class="token punctuation">.</span>useDualPoint<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-text"><code>  dp 1
</code></pre></div><h1>Use</h1> <h2 id="temperature-compensation"><a href="#temperature-compensation" aria-hidden="true" class="header-anchor">#</a> Temperature Compensation</h2> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ISE<span class="token punctuation">.</span><span class="token function">useTempCompensation</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>ISE<span class="token punctuation">.</span>useTempCompensation<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-text"><code>  tc 1
  tc 0
</code></pre></div><div><p>Temperature compensation can be used to adjust for the temperature effect on the probe. The device itself doesn't contain any firmware that adjusts the readings, that is left to be implemented by the probe-specific libraries. However, this is a saved setting on the device. The pH library checks this value and if <code>true</code>, will take a temperature reading and adjust the measured pH accordingly.</p></div> <h2 id="measurement-time"><a href="#measurement-time" aria-hidden="true" class="header-anchor">#</a> Measurement Time</h2> <p>A mV measurement takes 500 ms. A temperature measurement takes 750ms.</p> <h2 id="probe-maintenance"><a href="#probe-maintenance" aria-hidden="true" class="header-anchor">#</a> Probe Maintenance</h2> <p>Probes require regular care. There is a fluid junction that makes an electrical connection with the solution to be measured. If a probe is left continuously submerged, the junction could potentially leak the buffer fluid from inside the probe. The concentration of sodium chloride could change over time, slowly decreasing accuracy. This can be compensated for by recalibrating the probe, but eventually, the probe will no longer be serviceable.</p> <p>The junction can become clogged by debris or buildup. To clear a clogged junction, soak the probe in a 1:1 bleach solution. You can also use vinegar to help remove deposits on the probe.</p> <h2 id="isolation-and-interference"><a href="#isolation-and-interference" aria-hidden="true" class="header-anchor">#</a> Isolation and Interference</h2> <p>Using any water quality measuring probe with another probe will likely cause interference. There are many factors that determine the amount to include the grounding of the solution, the type of probes, the solution itself, chemical reactions that may take place, etc. The only way to ensure interference doesn't cause faulty measurements is to isolate the circuit.</p> <p>Each probe would need to be isolated from each other using either a galvanic isolation circuit, or connected to separated battery powered devices, transmitting information via <a href="https://github.com/u-fire/uFire_BLE" target="_blank" rel="noopener noreferrer">bluetooth<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="https://github.com/u-fire/uFire_WS" target="_blank" rel="noopener noreferrer">WiFi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, for example.</p> <h1>More Help</h1> <p>If you have any questions, find a bug, or have any suggestions on improvements, go to this project's <a href="https://github.com/u-fire/ISE_Probe" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> page and submit an Issue or Pull Request. Or you can send an email to <a href="mailto:questions@ufire.co">questions@ufire.co</a>.</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div></div></div>
    <script src="/ISE_Probe/assets/js/11.55ab4da4.js" defer></script><script src="/ISE_Probe/assets/js/app.c8384b2c.js" defer></script>
  </body>
</html>
